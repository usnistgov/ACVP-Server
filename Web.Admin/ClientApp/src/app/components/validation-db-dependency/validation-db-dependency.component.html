<div class="container">
  <div class="row mt-3">
    <div class="col-lg-12">
      <h2 *ngIf="selectedDependency?.name !== ''">{{ selectedDependency?.name }} (ID {{ selectedDependency?.id }})</h2>
      <h2 *ngIf="selectedDependency?.name === ''">(Empty name) (ID {{ selectedDependency?.id }})</h2> 
    </div>
  </div>
  <div class="row mt-3">

    <div class="col-lg-6">
      <!-- Dependency Information Card-->
      <div class="card">
        <h5 class="card-header">Dependency Information</h5>
        <div class="card-body">
          <!--<h5 class="card-title">Special title treatment</h5>-->
          <p class="card-text">

            <!-- These ngModel expressions are using a workaround for a known weakness: https://github.com/angular/angular/issues/7697 -->
            <label class="bold-heading">Name</label><input [(ngModel)]="referenceCopyDependency && referenceCopyDependency.name" type="text" class="form-control" placeholder="(Empty Name)"/>
            <label class="bold-heading">Type</label><input [(ngModel)]="referenceCopyDependency && referenceCopyDependency.type" type="text" class="form-control" placeholder="(Empty Type)"/>
            <label class="bold-heading">Description</label><textarea [(ngModel)]="referenceCopyDependency && referenceCopyDependency.description" type="text" class="form-control" placeholder="(Empty Description)"></textarea>
          </p>
          <button class="btn btn-primary" (click)="updateDependency()" style="float:left;margin-right:10px;">Apply Changes</button>
          <div *ngIf="updateStatusFlag === 'processing'">
            <div class="spinner-border spinner-border-sm text-warning"></div><span style="margin-left:10px;">Processing...</span>
          </div>
          <div *ngIf="updateStatusFlag === 'successful'">
            <div class="text-success" style="float:left;">âˆš</div><span style="margin-left:10px;">Success!</span>
          </div>
        </div>
      </div> <!-- Close Dependency Information Card -->
    </div>
    <div class="col-lg-6">
      <!-- Dependency Attribute Card-->
      <div class="card">
        <h5 class="card-header">Attributes</h5>
        <div class="card-body">
          <table class="table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Value</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <!-- This is only here to avoid getting a few "not defined" errors before the AJAX returns -->
              <tr *ngFor="let attribute of referenceCopyDependency?.attributes">
                <td>{{ attribute.name == "" || attribute.name == null ? "(Empty Name)" : attribute.name }}</td>
                <td>{{ attribute.value == "" || attribute.value == null ? "(Empty Value)" : attribute.value }}</td>
                <td><button class="btn btn-primary btn-sm bold-heading" (click)="deleteAttribute(attribute.id)">x</button></td>
              </tr>
              <tr>
                <td>
                  <input class="form-control" type="text" [(ngModel)]="newAttribute.name" placeholder="New Name..."/>
                  <p style="color:red;" *ngIf="noNameProvidedFlag">No name provided</p>
                </td>
                <td>
                  <input class="form-control" type="text" [(ngModel)]="newAttribute.value" placeholder="New Value..." />
                  <p style="color:red;" *ngIf="noValueProvidedFlag">No value provided</p>
                </td>
                <td><button class="btn btn-primary btn-sm bold-heading" (click)="addAttribute(newAttribute.name, newAttribute.value)">+</button></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div> <!-- Close Dependency Attribute Card -->
    </div>
  </div>
</div>
